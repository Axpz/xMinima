# å…³äºŽ GCP å¯æŠ¢å  VM å…³é—­è„šæœ¬çš„è®¨è®ºæ•´ç†

---

### ðŸ—³ï¸ é«˜èµžè¯„è®º

#### **åŸƒæ´›å…‹** Â· æŠ•ç¥¨çŽ‡é«˜ Â· 5 å¹´ 5 ä¸ªæœˆå‰  
> https://cloud.google.com/compute/docs/shutdownscript...æ‰€ä»¥ C  
> âœ… å·²ç‚¹èµž 41 æ¬¡  

#### **å°¼å»·èŒ¨** Â· 4 å¹´ 1 ä¸ªæœˆå‰  
> Cã€å¯åŠ¨/å…³é—­è„šæœ¬ = å…ƒæ•°æ®  
> âœ… å·²èµž 4 æ¬¡  

#### **ç»´æ²™å°” B** Â· 3 å¹´ 8 ä¸ªæœˆå‰  
> ç”±äºŽå®žä¾‹å·²ç»åˆ›å»ºï¼Œé€‰é¡¹ C è¢«æŽ’é™¤ã€‚  
> `gcloud compute instances add-metadata` å‘½ä»¤å¯ç”¨äºŽæ·»åŠ æˆ–æ›´æ–°è™šæ‹Ÿæœºå®žä¾‹çš„å…ƒæ•°æ®ã€‚  
> âœ… å·²èµž 12 æ¬¡  

#### **åŸºå°¼ç³»æ•°** Â· æŠ•ç¥¨çŽ‡é«˜ Â· 4 å¹´ 11 ä¸ªæœˆå‰  
> æˆ‘å¯¹ç­”æ¡ˆ C æœ‰ç–‘é—®ï¼Œå› ä¸ºé—®é¢˜æŒ‡å‡ºâ€œæ‚¨å·²ç»åˆ›å»ºäº†å®žä¾‹â€ï¼Œå› æ­¤ C ä¹Ÿæœ‰æ•ˆï¼Œä½†è§£å†³æ–¹æ¡ˆä¸é€‚ç”¨äºŽå·²åˆ›å»ºçš„å®žä¾‹ã€‚  
> D å¯¹æˆ‘æ¥è¯´ä¼¼ä¹Žæ˜¯æ­£ç¡®çš„ã€‚  
> ðŸ”— å‚è€ƒï¼šhttps://cloud.google.com/compute/docs/shutdownscript#apply_a_shutdown_script_to_running_instances  
> âœ… å·²èµž 28 æ¬¡  

#### **[å·²ç§»é™¤]** Â· 1 å¹´ 3 ä¸ªæœˆå‰  
> æˆ‘è®¤ä¸º C åº”è¯¥æ¯” D æ­£ç¡®  
> ðŸ”— https://cloud.google.com/compute/docs/shutdownscript#apply_a_shutdown_script_to_running_instances  
> âœ… å·²èµž 2 æ¬¡  

#### **NG123** Â· 2 å¹´ 9 ä¸ªæœˆå‰  
> æˆ‘ä¹Ÿæœ‰è¿™ç§æ„Ÿè§‰ï¼Œå› ä¸ºè™šæ‹Ÿæœºå·²ç»åˆ›å»ºå¥½äº†ã€‚  
> âœ… å·²èµž 2 æ¬¡  

#### **dsnaghxhinwtsvvmip** Â· 1 å¹´ 12 ä¸ªæœˆå‰  
> xinetdã€‚Xinet ä½¿å¾—ç­”æ¡ˆ D å˜å¾—æ¯«æ— æ„ä¹‰  
> âœ… å·²èµž 5 æ¬¡  

---

### ðŸ’¬ æ·±åº¦è¯„è®º

#### **pepYash** Â· 4 å¹´ 5 ä¸ªæœˆå‰  
> æ˜¯çš„ã€‚æ­£ç¡®ç­”æ¡ˆåº”è¯¥æ˜¯ Dã€‚  
> è¦å°†å…³æœºè„šæœ¬æ·»åŠ åˆ°æ­£åœ¨è¿è¡Œçš„å®žä¾‹ï¼Œè¯·æŒ‰ç…§â€œå°†å¯åŠ¨è„šæœ¬åº”ç”¨äºŽæ­£åœ¨è¿è¡Œçš„å®žä¾‹â€æ–‡æ¡£ä¸­çš„è¯´æ˜Žæ“ä½œï¼Œä½†è¯·å°†å…ƒæ•°æ®é”®æ›¿æ¢ä¸ºä»¥ä¸‹é”®ä¹‹ä¸€ï¼š  
> - `shutdown-script`ï¼šä½¿ç”¨æ­¤é”®ç›´æŽ¥æä¾›å…³æœºè„šæœ¬å†…å®¹ã€‚  
> - `shutdown-script-url`ï¼šä½¿ç”¨æ­¤é”®æä¾›å…³æœºè„šæœ¬æ–‡ä»¶çš„ Cloud Storage ç½‘å€ã€‚  
> âœ… å·²èµž 4 æ¬¡  

#### **pepYash**ï¼ˆåŽç»­ï¼‰  
> æ”¹å˜äº†æˆ‘çš„æƒ³æ³•ã€‚  
> å¯æŠ¢å è™šæ‹Ÿæœºå¯ä»¥éšæ—¶åœæ­¢å’Œå¯åŠ¨ã€‚æœ‰äº†è¿™ç§çµæ´»æ€§ï¼ŒC å°±æ²¡é—®é¢˜äº†ã€‚  
> âœ… å·²èµž 6 æ¬¡  

---

### ðŸ§µ è¿‘æœŸè§‚ç‚¹

#### **å“ˆåˆ©æ³•å…‹æ–¯** Â· æœ€è¿‘çš„ 1 ä¸ªæœˆ 2 å‘¨å‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šC**  
> å³ä½¿ Linux VM å®žä¾‹å·²ç»åˆ›å»ºï¼Œé€‰é¡¹ C ä»ç„¶æ˜¯å¯è¡Œçš„ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å…ƒæ•°æ®å‘çŽ°æœ‰å®žä¾‹æ·»åŠ å…³é—­è„šæœ¬ã€‚  
> D éžå¸¸å¤æ‚ï¼Œxinetd çš„ä½¿ç”¨å¢žåŠ äº†ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Œå¹¶ä¸”å¯èƒ½ä¸å¦‚ç®€å•åœ°ä½¿ç”¨å…³é—­è„šæœ¬å…ƒæ•°æ®é”®é‚£ä¹ˆæœ‰æ•ˆã€‚  
> âœ… å·²èµž 1 æ¬¡  

#### **ç½—ä¼¯ç‰¹Â·é˜¿è¯º** Â· 3 ä¸ªæœˆ 3 å‘¨å‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šC**  
> â€œå½“æ‚¨åˆ›å»ºæ–°çš„è™šæ‹Ÿæœºå®žä¾‹æ—¶â€æ„å‘³ç€ä¸ºæ—¶å·²æ™šï¼Œé‚£ä¹ˆ C ä¼¼ä¹Žè¢«å–æ¶ˆèµ„æ ¼ :( ä½†å…¶ä»–é€‰æ‹©æ›´ç³Ÿç³•ï¼Ÿ  
> âœ… å·²èµž 1 æ¬¡  

#### **åŸƒå…‹æ‹‰ç±³Â·åŸƒå°”çº³åŠ å°”** Â· 4 ä¸ªæœˆ 3 å‘¨å‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šC**  
> 1. å¯æŠ¢å å®žä¾‹å’Œå…³é—­è„šæœ¬ï¼šGoogle Cloud Platform çš„å¯æŠ¢å å®žä¾‹ç»æµŽé«˜æ•ˆï¼Œä½†å¯èƒ½ä¼šåœ¨çŸ­æ—¶é—´å†…ç»ˆæ­¢ã€‚  
> ä¸ºäº†å¦¥å–„å¤„ç†è¿™ç§æƒ…å†µï¼Œæ‚¨éœ€è¦ä¸€ä¸ªåœ¨å®žä¾‹è¢«æŠ¢å ä¹‹å‰è¿è¡Œçš„å…³é—­è„šæœ¬ã€‚  
> 2. å…ƒæ•°æ®å’Œå…³é—­è„šæœ¬ï¼šGoogle Cloud å…è®¸æ‚¨å‘å®žä¾‹æ·»åŠ è‡ªå®šä¹‰å…ƒæ•°æ®ã€‚åˆ›å»ºå¯æŠ¢å å®žä¾‹æ—¶ï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ªå…³é—­è„šæœ¬å…ƒæ•°æ®æ¡ç›®ã€‚  
> æ­¤æ¡ç›®çš„å€¼åº”è¯¥æ˜¯æ‚¨çš„è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†åœ¨å®žä¾‹è¢«æŠ¢å ä¹‹å‰è‡ªåŠ¨æ‰§è¡Œã€‚  
> âœ… å·²èµž 1 æ¬¡  

---

### ðŸ—¨ï¸ å…¶ä»–è¯„è®º

#### **å·´é‡Œ123456** Â· 5 ä¸ªæœˆ 3 å‘¨å‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šD**  
> ä¸æ˜¯ Cã€‚C è¯´çš„æ˜¯â€œåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºå®žä¾‹æ—¶â€ã€‚ä½†åœ¨é—®é¢˜ä¸­ï¼Œå®žä¾‹å·²ç»åˆ›å»ºå¥½äº†ã€‚å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ Dã€‚  
> D ä¸­çš„â€œæœåŠ¡ URLâ€æ˜¾ç„¶æŒ‡çš„æ˜¯äº‘å­˜å‚¨ã€‚  
> âœ… å·²èµž 1 æ¬¡  

#### **æ–¯å†…å“ˆç´¢** Â· 7 ä¸ªæœˆ 4 å‘¨å‰  
> åœ¨é€‰é¡¹ C å’Œ D ä¸­ï¼Œé€‰é¡¹ D ä½¿ç”¨å…³æœºè„šæœ¬ URLï¼Œä½† URL åº”è¯¥æ˜¯äº‘å­˜å‚¨ URLï¼Œè€Œä¸æ˜¯ Linux æœåŠ¡ URLã€‚è¿™è®©æˆ‘ä»¬æƒ³åˆ°äº†é€‰é¡¹ C  
> âœ… å·²èµž 1 æ¬¡  

#### **æ´ªå¾·å¤«** Â· 8 ä¸ªæœˆå‰  
> é€‰æ‹© C  
> âœ… å·²èµž 1 æ¬¡  

#### **å°¼å…‹æ–¯19** Â· 9 ä¸ªæœˆ 2 å‘¨å‰  
> C æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸º xinetd æ²¡æœ‰æ„ä¹‰ã€‚  
> âœ… å·²èµž 1 æ¬¡  

#### **åˆ©è¨æ¯”è¨** Â· 1 å¹´ 1 ä¸ªæœˆå‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šC**  
> GCP ä¸­çš„æ¯ä¸ªè™šæ‹Ÿæœºå®žä¾‹éƒ½å¯ä»¥è®¿é—®å…ƒæ•°æ®æœåŠ¡å™¨ã€‚è¯¥æœåŠ¡å™¨æä¾›æœ‰å…³å®žä¾‹çš„ä¿¡æ¯ï¼Œå¹¶å…è®¸æ‚¨é…ç½®å„ç§è®¾ç½®ï¼ŒåŒ…æ‹¬å¯åŠ¨å’Œå…³é—­è„šæœ¬ã€‚  
> `shutdown-script` æŒ‡å®šåœ¨å®žä¾‹å…³é—­æ—¶åº”æ‰§è¡Œçš„å…³é—­è„šæœ¬ã€‚  
> âœ… å·²èµž 2 æ¬¡  

#### **ashishdwi007** Â· 1 å¹´ 2 ä¸ªæœˆå‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šC**  
> æ‰€æœ‰å…¶ä»–é€‰é¡¹éƒ½ä¸Ž Linux æ–‡ä»¶æˆ–æœåŠ¡ç›¸å…³ã€‚å¯¹äºŽå¯æŠ¢å å¼è™šæ‹Ÿæœºæ¥è¯´ï¼Œè¿™äº›æ“ä½œæ˜¯å¼€é”€ã€‚å› æ­¤ï¼Œè‡ªåŠ¨åŒ–æ­¤ç±»ä»»åŠ¡æ˜¯æœ‰æ„ä¹‰çš„ã€‚  
> âœ… å·²èµž 1 æ¬¡  

#### **Mo7y** Â· 1 å¹´ 2 ä¸ªæœˆå‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šC**  
> ç­”æ¡ˆè¦ä¹ˆæ˜¯ Cï¼Œè¦ä¹ˆæ˜¯ Dã€‚æˆ‘æŽ’é™¤ Dï¼Œå› ä¸º shutdown-script-url ä»…é€‚ç”¨äºŽæ‰˜ç®¡åœ¨äº‘å­˜å‚¨ä¸Šçš„å…³æœºè„šæœ¬ã€‚  
> D è¦æ±‚æ‚¨å°† shutdown-script-url ç”¨äºŽæœ¬åœ°æ‰˜ç®¡çš„å…³æœºè„šæœ¬ï¼Œå› æ­¤å®ƒä¸æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚  
> âœ… å·²èµž 3 æ¬¡  

#### **kip21** Â· 1 å¹´ 2 ä¸ªæœˆå‰  
> C  
> ðŸ”— https://cloud.google.com/compute/docs/shutdownscript  
> âœ… å·²èµž 1 æ¬¡  

#### **è°¢å¿—å¼º** Â· 1 å¹´ 3 ä¸ªæœˆå‰  
> ç­”æ¡ˆåº”è¯¥æ˜¯ Cã€‚  
> ðŸ”— å‚è€ƒï¼šhttps://cloud.google.com/compute/docs/shutdownscript#apply_a_shutdown_script_to_running_instances  
> å…³äºŽç­”æ¡ˆ Dï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªé€‰é¡¹ï¼Œå› ä¸ºä¸éœ€è¦è§¦åŠ Linux å†…éƒ¨çš„ xinetd æœåŠ¡ã€‚  
> âœ… å·²èµž 2 æ¬¡  

#### **éŸ¿é³´** Â· 1 å¹´ 5 ä¸ªæœˆå‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šD**  
> æˆ‘è®¤ä¸ºç­”æ¡ˆåº”è¯¥æ˜¯ Dï¼Œå› ä¸ºè™šæ‹Ÿæœºå·²ç»åˆ›å»º  
> âœ… å·²èµž 1 æ¬¡  

#### **é˜¿ä¼¦_m_123** Â· 1 å¹´ 5 ä¸ªæœˆå‰  
> **æ‰€é€‰ç­”æ¡ˆï¼šC**  
> C æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚çž§ï¼Œè¿™é‡Œæœ‰ä¸ªæç¤ºï¼šåœ¨ GCP ä¸­ï¼Œè¿™ç±»ä¸œè¥¿ä¼šä»¥è§£å†³æ–¹æ¡ˆçš„å½¢å¼æä¾›ç»™å®¢æˆ· â€”â€” æ¯”å¦‚æä¾›å…³æœºè„šæœ¬ã€‚  
> GCP ä¸ä¼šè´¹å¿ƒè®©ç”¨æˆ·äº†è§£é‚£äº›å¤æ‚çš„ Linux çŸ¥è¯†ã€‚æ‰€ä»¥ç­”æ¡ˆå¾ˆç®€å•ï¼Œå°±æ˜¯ Cã€‚  
> âœ… å·²èµž 1 æ¬¡  

#### **æ­¦å­”** Â· 1 å¹´ 6 ä¸ªæœˆå‰  
> é€‰é¡¹ Dï¼šåˆ›å»ºä¸€ä¸ªå…³é—­è„šæœ¬ï¼Œåœ¨ Linux ä¸­æ³¨å†Œä¸º xinetd æœåŠ¡ï¼Œå¹¶ä½¿ç”¨ `gcloud compute instance add-metadata` å‘½ä»¤å°†æœåŠ¡ URL æŒ‡å®šä¸ºå…·æœ‰é”® `shutdown-script-url` çš„æ–°å…ƒæ•°æ®æ¡ç›®çš„å€¼ã€‚  
> å®ƒä¸å¦‚é€‰é¡¹ C å¯é ï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨è™šæ‹Ÿæœºå®žä¾‹ä¸Šå®‰è£…å’Œé…ç½® gcloud å‘½ä»¤è¡Œå·¥å…·ã€‚  
> âœ… å·²èµž 1 æ¬¡  
