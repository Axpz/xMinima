<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Firestore Access 答案解析</title>
</head>
<body>
  <h2>题目：</h2>
  <p>
    你正在为 Mountkirk Games 实现 Firestore。Mountkirk Games 希望让一个新游戏以编程方式访问一个旧游戏的 Firestore 数据库。<br>
    <strong>访问权限应尽可能受限。</strong><br><br>
    你该怎么做？
  </p>

  <h3>选项：</h3>
  <ul>
    <li><strong>A.</strong> 在旧游戏的 Google Cloud 项目中创建一个服务账号（SA），在新游戏的 IAM 页面中添加第二个 SA，然后为这两个 SA 都授予 Organization Admin 角色。</li>
    <li><strong>B.</strong> 在旧游戏的 Google Cloud 项目中创建一个服务账号（SA），赋予该 SA Organization Admin 角色，然后在两个项目中赋予它 Firebase Admin 角色。</li>
    <li><strong>C.</strong> 在旧游戏的 Google Cloud 项目中创建一个服务账号（SA），在新游戏的 IAM 页面中添加此 SA，然后在两个项目中赋予它 Firebase Admin 角色。</li>
    <li><strong>D.</strong> 在旧游戏的 Google Cloud 项目中创建一个服务账号（SA），赋予其 Firebase Admin 角色，然后将新游戏迁移到旧游戏的项目中。</li>
  </ul>

  <h3>正确答案：</h3>
  <p style="color: green;"><strong>C. 在旧游戏的 Google Cloud 项目中创建一个服务账号（SA），在新游戏的 IAM 页面中添加此 SA，然后在两个项目中赋予它 Firebase Admin 角色。</strong></p>

  <h3>解析：</h3>
  <ul>
    <li><strong>A 错误：</strong> Organization Admin 权限太高，风险大，不符合最小权限原则。</li>
    <li><strong>B 错误：</strong> 同样不应使用 Organization Admin，权限范围过大。</li>
    <li><strong>C 正确：</strong> 
      <ul>
        <li>服务账号位于旧项目，可直接访问旧的 Firestore 数据。</li>
        <li>将该 SA 添加到新项目 IAM，可以在新游戏中使用它。</li>
        <li>只分配 Firebase Admin 角色，刚好满足 Firestore 访问需求，符合最小权限原则。</li>
      </ul>
    </li>
    <li><strong>D 错误：</strong> 项目迁移会导致资源混乱，不推荐用于这种场景。</li>
  </ul>

  <p><strong>总结：</strong>选择 C 是最安全、最干净、权限最小的方案。</p>
</body>
</html>
