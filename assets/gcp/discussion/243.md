## 社区讨论摘录（数据流量与 GCP 组件）

---

### jcmoranp（高赞，发表于 5 年 5 个月前）
Pub/Sub 适合使用，因为有太多数据流量，不适合 BigQuery...

👍 赞同数：41

---

### alexspam88（发表于 3 年 10 个月前）
Pub/Sub 也可能处理不了太多流量  
参考链接：https://cloud.google.com/pubsub/quotas

👍 赞同数：4

---

### Bill831231（发表于 3 年 6 个月前）
感谢分享链接，但看起来 Pub/Sub 能处理的数据流量比 BigQuery 更大。  
Pub/Sub 在大型区域每分钟可达 120,000,000 kB（约 2 GB/s），BigQuery 为 1 GB/s。

👍 赞同数：7

---

### JoeShmoe（高赞，发表于 5 年 5 个月前）
答案是 B，数据量超过了 BigQuery 的流式限制。

👍 赞同数：20

---

### user263263（最近发布，2 个月 2 周前）
选定答案：D  
我认为这个问题的答案已经过时了。  
参考：https://cloud.google.com/architecture/connected-devices  
正确答案应为“MQTT Broker” 或 “IoT 平台”。Google 建议仅在设备数量为“数百”时才使用“直接对接 Pub/Sub”。

👍 赞同数：1

---

### VegasDegenerate（发表于 9 个月 2 周前）
必须是 Pub/Sub，你面对的是远程车辆并需要保证消息传递。

👍 赞同数：1

---

### the1dv（发表于 1 年前）
哇，就像 GCP 不该下线他们的 IoT Core 产品一样 —— 你无法“直接写入 Pub/Sub”。  
这是正确答案但过于简化。  
直接写入 GCS 的话，会因为 GET 请求而导致费用高昂。

👍 赞同数：2

---

### Vesta1807（发表于 1 年 3 个月前）
选定答案：C  
流式数据可以在插入表的几秒内进行实时分析。  
相比使用作业加载数据到 BigQuery，你可以选择通过 `tabledata().insertAll()` 方法一条条地流式写入数据。  
这种方式允许无需加载作业的延迟即可查询数据。  
参考资料：https://cloud.google.com/bigquery/streaming-data-into-bigquery

👍 赞同数：1

---

### MahAli（发表于 1 年 4 个月前）
选定答案：A  
他们是通过 FTP 发送文件的，为什么大家都忽略了这一点？  
Pub/Sub 的最大消息大小是 10MB（如果我没记错的话），我会保留文件的方案，并尝试更新配置让上传直接指向 GCS。

👍 赞同数：5

---

### BiddlyBdoyng（发表于 1 年 10 个月前）
很多人指出这超过了 BigQuery 的配额限制，但很少人指出也超过了 Pub/Sub 的配额限制......  
所以答案要么就不受配额限制（那为啥不能用 BigQuery？）  
要么两者都不对，那我们就继续用 FTP。

👍 赞同数：1

---

### kapara（发表于 1 年 10 个月前）
选定答案：B  
就是 B。

👍 赞同数：1

---

### nunopires2001（发表于 2 年 2 个月前）
我知道是 B，不过这些传感器可能是遗留系统，没法与 Pub/Sub 队列通信。  
忽视对 2000 万台设备的更改或适配的难度是个错误。

👍 赞同数：3

---

### omermahgoub（发表于 2 年 3 个月前）
为处理 TerramEarth 计划引入的数据量，建议使用如 Google Cloud Pub/Sub 这类可扩展且可靠的数据引入解决方案。  
使用 Cloud Pub/Sub，车辆可以直接向该服务流式发送数据，它可以处理大量数据并提供缓冲以吸收突发流量。  
然后可处理这些数据并将其存入如 BigQuery 的数据仓库中进行分析。

- A（直接写入 GCS）不适合实时高数据量，数据量超过 GCS 处理能力可能会导致数据丢失。
- C（直接流式传输到 BigQuery）也不适合实时高数据量，可能会导致数据丢失或延迟。
- D（继续使用现有系统）不适合，因为现有系统可能无法应对增加的数据量，也可能导致数据丢失或延迟。

👍 赞同数：11

---

### sank8（发表于 2 年 3 个月前）
正确，感谢解释。

👍 赞同数：1

---

### surajkrishnamurthy（发表于 2 年 4 个月前）
选定答案：B  
B 是正确答案。

👍 赞同数：1

---

### megumin（发表于 2 年 5 个月前）
选定答案：B  
赞同 B。

👍 赞同数：1

---

### Mahmoud_E（发表于 2 年 5 个月前）
选定答案：B  
B 是正确答案，这个类似的问题在 Google 的简答题中也出现过。

👍 赞同数：1

---

### AzureDP900（发表于 2 年 9 个月前）
B 是对的！

👍 赞同数：2

---

### cdcollector（发表于 2 年 10 个月前）
应该是 A —— 参考下一个问题中提到的 80% 蜂窝网络覆盖率和直接流式以 Avro 格式写入 GCS。

👍 赞同数：2

---

### amxexam（发表于 2 年 11 个月前）
选定答案：B  
我们需要缓冲，BigQuery 默认限制是每秒 100 次 API 调用，目前还无法更改。  
所以我们应当使用 Pub/Sub 来缓解这个问题，因此选 B。

👍 赞同数：2
