# BigQuery 与 GCS 生命周期管理答疑讨论整理
  
  ---
  
  ## 💬 KouShikyou（高赞，4年前）
  
  > 我认为 C 是正确的。  
  > SetStorageClass 不能被设置为 NONE。在数据过期后，应该删除的是数据，不是整个表。  
  > **👍 41 次赞**
  
  ---
  
  ## 💬 techalik（2 年 10 个月前）
  
  > C：启用存储桶生命周期管理规则以删除超过 36 个月的对象。在 BigQuery 中使用分区表，并将分区过期时间设置为 36 个月是正确的做法。  
  >
  > 当你创建一个按摄取时间（ingestion time）分区的表时，BigQuery 会自动将数据加载到基于日期的每日分区中，反映数据的摄取时间或到达时间。  
  >
  > 参考链接：  
  > - https://cloud.google.com/bigquery/docs/partitioned-tables#ingestion_time  
  > - https://cloud.google.com/bigquery/docs/best-practices-storage#use_the_expiration_settings_to_remove_unneeded_tables_and_partitions  
  >
  > Google 推荐你为数据集配置默认表过期时间、为表配置过期时间、以及为分区表配置分区过期时间。  
  >
  > 如果分区表配置了表过期时间，则其中所有分区会根据该过期时间删除。对于我们的具体需求，可以将分区过期时间设置为 36 个月，从而自动删除超过 36 个月的分区及其数据。  
  > **👍 24 次赞**
  
  ---
  
  ## 💬 nitinz（2 年 7 个月前）
  
  > C，BigQuery 中进行分区并设置过期时间，同时在 GCS 存储桶上使用生命周期管理。  
  > **👍 3 次赞**
  
  ---
  
  ## 💬 AMohanty（1 年 2 个月前）
  
  > 没有叫做 Storage Class 为 NONE 的东西。  
  > **👍 3 次赞**
  
  ---
  
  ## 💬 mister（3 年 12 个月前）
  
  > 为什么不是 A？  
  > **👍 2 次赞**
  
  ---
  
  ## 💬 tartar（3 年 2 个月前）
  
  > C 是可以的。  
  > **👍 11 次赞**
  
  ---
  
  ## 💬 VishalB（2 年 2 个月前）
  
  > 因为你会最终为每天创建一个表，而这不是一个好习惯。  
  > **👍 2 次赞**
  
  ---
  
  ## 💬 Wonka（1 年 9 个月前）
  
  > 或者说，它会删除整个表以及其中所有的数据，例如少于 36 个月的数据也会被删掉。  
  > **👍 2 次赞**
  
  ---
  
  ## 💬 Pankonics（2 年 9 个月前）
  
  > C 是正确答案。  
  > **👍 2 次赞**
  
  ---
  
  ## 💬 MeasService（高赞，3 年 11 个月前）
  
  > 答案 C 是正确的选择。使用 BigQuery 中的表过期设置与 GCS 的生命周期管理。  
  > **👍 24 次赞**
  
  ---
  
  ## 💬 passnow（3 年 9 个月前）
  
  > 我投票选 C。  
  > **👍 4 次赞**
  
  ---
  
  ## 💬 thamaster（最近，9 个月 2 周前）
  
  > 选择的答案：C  
  > 是 C，我百分之百确定，其他答案都是错误的，没有叫 NONE 的存储类型，而且你需要实际删除数据。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 megumin（11 个月 1 周前）
  
  > 选择的答案：C  
  > C 没问题。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 Mahmoud_E（11 个月 3 周前）
  
  > 选择的答案：C  
  > C 是正确的。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 AzureDP900（1 年 3 个月前）
  
  > C 是正确的。  
  > **👍 2 次赞**
  
  ---
  
  ## 💬 amxexam（1 年 4 个月前）
  
  > 选择的答案：C  
  > BigQuery 使用分区是正道，因此是 B 和 C。对于块存储，C 是正解。因此是 C。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 OrangeTiger（1 年 9 个月前）
  
  > 选择的答案：D  
  > “他们明年想使用这些数据来训练机器学习模型。”我同意 D。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 OrangeTiger（1 年 9 个月前）
  
  > 我在提问中犯了个错误，发了评论。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 kimharsh（1 年 4 个月前）
  
  > 你还搞砸了正确答案的百分比哈哈。  
  > **👍 3 次赞**
  
  ---
  
  ## 💬 vincy2202（1 年 10 个月前）
  
  > 选择的答案：C  
  > C 是正确答案。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 joe2211（1 年 10 个月前）
  
  > 选择的答案：C  
  > 投票给 C。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 MaxNRG（1 年 11 个月前）
  
  > 正确答案：C  
  > A —— 不成立，因为表没有“保留期”，只有“过期时间”，一旦过期会被完全移除。  
  > B/D —— 不成立，因为没有叫做 NONE 的存储类型。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 [已移除]（1 年 12 个月前）
  
  > C 是正确的。使用时间分区的表，并在 GCS 上配置生命周期管理以在 36 个月后删除数据。  
  > **👍 2 次赞**
  
  ---
  
  ## 💬 victory108（2 年 2 个月前）
  
  > C。为欧洲数据创建一个 BigQuery 的时间分区表，并将分区过期时间设置为 36 个月。对于 Cloud Storage，使用 gsutil 启用生命周期管理，设置 DELETE 动作并附带 Age 条件为 36 个月。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 MamthaSJ（2 年 3 个月前）
  
  > 答案是 C。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 Ausias18（2 年 6 个月前）
  
  > 答案是 C。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 lynx256（2 年 6 个月前）
  
  > 个人看法 —— C 是可以的（假设使用 DAY 或更低级别的时间分区）。  
  > 我们想删除的是超过 36 个月的分区，而不是整个表。  
  > **👍 1 次赞**
  
  ---
  
  ## 💬 okixavi（2 年 9 个月前）
  
  > C 是正确答案。  
  > **👍 2 次赞**
  